# iOS Build Action
name: react-native-ios-build-ipa
on:
  push:
    branches:
      - master
jobs:
  install-and-test:
    runs-on: macos-latest
    steps:
      - uses: actions/checkout@v2
      - name: Install npm dependencies
        run: |
          npm install
  build-ios:
    needs: install-and-test
    runs-on: macos-latest
    steps:
      - uses: actions/checkout@v2
      - name: Install npm dependencies
        run: |
          npm install
      - name: init cocoapods
        run: cd ios && sudo gem install cocoapods --pre && pod install
      - name: show dir
        run: cd ios && ls
      - name: iOS Build Action
        uses: yukiarrr/ios-build-action@v0.5.1
        with:
          # project-path: ios/rntaxapp.xcodeproj
          # p12-base64: ${{ secrets.P12_BASE64 }}
          # mobileprovision-base64: ${{ secrets.MOBILEPROVISION_BASE64 }}
          # code-signing-identity: ${{ secrets.CODE_SIGNING_IDENTITY }}
          # team-id: ${{ secrets.TEAM_ID }}
          # workspace-path: ios/rntaxapp.xcworkspace
          # ------------------------------------------------
          # Required .xcodeproj path.
          project-path: ios/rntaxapp.xcodeproj
          # Required Base64 encoded p12 file.
          p12-base64: ios/ca-tax.p12
          # Required Base64 encoded mobileprovision file.
          mobileprovision-base64: ios/rntaxapp.mobileprovision
          # Required For example, "iOS Distribution".
          code-signing-identity: iOS Development
          # Required Team id.
          team-id: C5ZW694LZ9
          # .xcworkspace path. Default "".
          workspace-path: ios/rntaxapp.xcworkspace
          # Choose app-store, "ad-hoc", "package" "enterprise", "development", or "developer-id". Default "app-store".
          export-method: development
          # For example, "Debug", "Release". Default "Release".
          configuration: Debug
          # For example, "myscheme".
          # scheme: 'ios/rntaxapp.xcodeproj/xcshareddata/xcschemes/rntaxapp.xcscheme'
          # Certificate password. Default "".
          # certificate-password:
          # Output path of ipa. Default "output.ipa".
          output-path: app-release.ipa
